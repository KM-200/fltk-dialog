dist: trusty
language: cpp
compiler: gcc

addons:
  apt:
    packages:
      - libx11-dev
      - libxcursor-dev
      - libxext-dev
      - libxfixes-dev
      - libxft-dev
      - libxinerama-dev
      - cmake
      - libqt4-dev
      - qtbase5-dev

script:
  - ./configure --enable-hardening --enable-small
  - make -j1 V=1

after_success:
  - ( mkdir out ; cd out ; tar cJ fltk-dialog-x86_64_linux.tar.xz ../fltk-dialog )
  - wget -c https://github.com/probonopd/uploadtool/raw/master/upload.sh
  - bash ./upload.sh out/*

branches:
  except:
    - # Do not build tags that we create when we upload to GitHub Releases
    - /^(?i:continuous)$/
